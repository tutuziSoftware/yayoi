<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Jasmine Spec Runner v2.0.0</title>

  <link rel="shortcut icon" type="image/png" href="lib/jasmine-2.0.0/jasmine_favicon.png">
  <link rel="stylesheet" type="text/css" href="lib/jasmine-2.0.0/jasmine.css">

  <script type="text/javascript" src="lib/jasmine-2.0.0/jasmine.js"></script>
  <script type="text/javascript" src="lib/jasmine-2.0.0/jasmine-html.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script type="text/javascript" src="lib/jasmine-2.0.0/boot.js"></script>

  <!-- include source files here... -->
  <script type="text/javascript" src="http://localhost:3000/javascripts/battle.js"></script>
  <script type="text/javascript" src="http://localhost:3000/javascripts/jquery-2.1.1.min.js"></script>

  <!-- include spec files here... -->
	<script>
		describe("クローンプレイヤーの動作", function(){
			var socket;
			
			beforeEach(function(done){
				//ログイン + socket.ioで通信可能にする
				$.post("/login", {
					"userName":"puruhime",
					"password":"puruhime"
				}, function(data){
					socket = io.connect('http://localhost:3000/battle/tester');
					
					socket.on("connect", function(){
						done();
					});
				});
			});
			
			it("shuffle APIの使用", function(done){
				socket.on("first draw", function(field){
					console.log(field);
					expect(field).toBeDefined();
					done();
				});
		
				socket.emit("shuffle", "");
			});
		});
	</script>
</head>

<body>
</body>
</html>
